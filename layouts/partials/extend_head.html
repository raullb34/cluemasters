{{/* Extra SEO and structured data injection */}}
{{- $title := or .Params.title .Title -}}
{{- $desc := or .Params.description (.Summary | plainify) -}}
{{- $canonical := .Permalink -}}
{{- $image := .Params.cover.image -}}

<link rel="canonical" href="{{ $canonical }}">
{{ if $desc }}<meta name="description" content="{{ $desc }}">{{ end }}

<!-- Open Graph -->
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
<meta property="og:title" content="{{ $title }}">
{{ if $desc }}<meta property="og:description" content="{{ $desc }}">{{ end }}
<meta property="og:url" content="{{ $canonical }}">
{{ if $image }}<meta property="og:image" content="{{ $image }}">{{ end }}

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ $title }}">
{{ if $desc }}<meta name="twitter:description" content="{{ $desc }}">{{ end }}
{{ if $image }}<meta name="twitter:image" content="{{ $image }}">{{ end }}

{{/* JSON-LD Schema.org */}}
{{ if .IsPage }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": {{ $title | jsonify }},
  "description": {{ $desc | jsonify }},
  "datePublished": {{ or (.PublishDate.Format "2006-01-02") (.Date.Format "2006-01-02") | jsonify }},
  "dateModified": {{ .Lastmod.Format "2006-01-02" | jsonify }},
  "author": {
    "@type": "Person",
    "name": {{ (or .Params.author site.Params.author) | jsonify }}
  },
  "mainEntityOfPage": {{ $canonical | jsonify }},
  "image": {{ $image | jsonify }}
}
</script>
{{ else }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": {{ site.Title | jsonify }},
  "url": {{ site.BaseURL | jsonify }}
}
</script>
{{ end }}
